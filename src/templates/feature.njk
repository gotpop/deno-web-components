{% extends "base-hero.njk" %}
{% from "partials/code/code-block.njk" import codeBlock %}

{% block hero %}
    <section class="hero-section" id="hero-section">
        <layout-item start="1" end="22" row="1" id="hero" variant="light" size="large" role="banner">
            <h1 
        bottom="1" 
        id="heading-primary"
        top="1" 
        variant="lg" 
    >{{ currentFeature.title }}</h1>
            <p 
                    variant="md" 
                    id="subheading-{{ loop.index }}" 
                    top="3">
                {% for desc in currentFeature.description %}
                    {{ desc | codeBackticks | safe }}
                {% endfor %}
            </p>
        </layout-item>
        <layout-item 
        start="16" 
        end="-1"
        id="navigation-bar"
        row="1"
        >
            <nav class="navigation-bar" id="navigation-bar">
                {% if navigation.previous %}
                    <a id="previous" variant="button" href="/features/{{ navigation.previous.slug }}">
                        <i>&larr;</i>
                        <b>{{ navigation.previous.name }}</b>
                    </a>
                {% endif %}

                {% if navigation.next %}
                    <a id="next" variant="button" href="/features/{{ navigation.next.slug }}">
                        <b>{{ navigation.next.name }}</b>
                        <i>&rarr;</i>
                    </a>
                {% endif %}
            </nav>
            <aside class="aside-links" id="links">
                <h4 variant="md" top="1" bottom="1">Links</h2>
                {% for link in currentFeature.links %}
                    <a 
                class="link-feature"
                justify="left"
                href="{{ link.link }}"
            >
                        <span>{{ link.label }}</span></a>
                {% endfor %}
            </aside>
        </layout-item>
    </section>

{% endblock %}

{% block page_content %}
    <surface-item 
        aria-label="{{ currentFeature.title }}"
        id="{{ currentFeature.slug }}"
        size="large" 
        variant="light"
        end="-4"
        start="4"
        class="feature-content"
        >

        <layout-item
        start="1"
        end="10"
        id="feature-image"
        size="large"
        variant="column"
        >

            {% for item in currentFeature.bodyMarkupData %}
                {% if item.tag == "h2" %}
                    <h2 variant="lg" top="1" bottom="3" id="{{ item.id }}">{{ item.content }}</h2>

                {% elif item.tag == "h3" %}
                    <h3 variant="lg" top="4" bottom="3" id="{{ item.id }}">{{ item.content }}</h3>

                {% elif item.tag == "p" %}
                    <p top="1" bottom="2">{{ item.content | codeBackticks | safe }}</p>

                {% elif item.tag == "ul" %}
                    <ul>
                        {% for listItem in item.items %}
                            <li>{{ listItem | codeBackticks | safe }}</li>
                        {% endfor %}
                    </ul>

                {% elif item.tag == "codeblock" %}
                    {{ codeBlock(item.language, item.code) }}

                {% else %}
                    <{{ item.tag }} {% if item.id %}id="{{ item.id }}"{% endif %}>
                        {{ item.content }}
                    </{{ item.tag }}>
                {% endif %}
            {% endfor %}
            <a 
            class="link-feature" 
            href="/features">
                <span>Back to Features</span></a>
        </layout-item>

    </surface-item>
    {# <surface-item   
        align="start"
        align-self="start"
        aria-label="{{ currentFeature.title }}"
        id="links"
        end="36"
        size="medium" 
        start="23" 
        variant="light" 
    >
        {% for link in currentFeature.links %}
            <a 
                class="link-feature"
                justify="left"
                href="{{ link.link }}"
            >
                <span>{{ link.label }}</span></a>
        {% endfor %}
    </surface-item> #}

{% endblock %}