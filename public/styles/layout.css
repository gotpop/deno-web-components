/* prettier-ignore */
layout-item {
  display: grid;
  grid-column: attr(start type(<integer>)) / attr(end type(<integer>));
  grid-row: attr(row type(<integer>));
  grid-template-columns: subgrid;
  align-content: attr(align type(<custom-ident>), normal);
  row-gap: attr(row-gap rem, unset);
}

/* prettier-ignore */
.surface {
  --light-scheme: --transparent(var(--light-100), 0.4);
  --dark-scheme: var(--secondary-400);
  --variant: attr(variant type(<custom-ident>));
  --size-attr: attr(size type(<custom-ident>));

  --scheme: if(
      style(--variant: dark): var(--dark-scheme); 
      style(--variant: light): var(--light-scheme); 

      else: transparent
    );

  --padding-size: if(
      style(--size-attr: large): 3rem; 
      style(--size-attr: medium): 2rem; 
      style(--size-attr: small): 1rem; 
      else: 0rem /* Default padding */
    );

  align-content: space-between;
  background-color: var(--scheme);
  color: var(--dark-500);
  display: grid;
  grid-column: 1 / -1;
  grid-row: attr(row type(<integer>));
  grid-template-columns: auto;
  padding: var(--padding-size);
  view-transition-name: attr(id type(<custom-ident>), none);
}

a:not([class]) {
  padding: 1rem;
  margin-bottom: 2rem;
  display: flex;
  align-self: self-start;
  background-color: var(--secondary-500);
  width: max-content;
  color: var(--light-100);

  &:last-child {
    margin-bottom: 0;
  }

  span {
    padding-top: calc(1rem - 1cap);
  }
}

.feature-link {
  color: var(--colour-light-1);
  display: inline flex;
  font-size: var(--font-scaled-base);
  margin-inline: auto 0;
  max-width: max-content;
  padding-block-start: calc(1rem - 1cap);
  text-decoration: underline 2px var(--secondary-200);
  text-underline-offset: var(--spacing-base);
  margin-block-start: auto; /* Pushes the link to the bottom */
  margin-block-end: 0; /* Removes bottom margin */

  &:hover {
    background-color: var(--light-600);
  }
}

@function --responsive(--mobile, --tablet, --desktop) {
  result: var(--mobile);

  @media screen and (width >= 768px) {
    result: var(--tablet);
  }

  @media screen and (width >= 1024px) {
    result: var(--desktop);
  }
}

grid-auto {
  column-gap: --responsive(0rem, 3rem, 5rem);
  display: grid;
  grid-auto-flow: row;
  grid-column: 2 / -2;
  grid-template-columns: repeat(auto-fit, minmax(20rem, 1fr));
  row-gap: 8rem;
  width: 100%;

  > .surface {
    grid-column: auto;
  }
}

main-content {
  display: grid;
  grid-column: full;
  grid-row: main;
  grid-template-columns: subgrid;
  align-items: start;
  grid-auto-rows: min-content;
}

@property --gutter-columns {
  syntax: "*";
  initial-value: 0.5rem;
  inherits: false;
}

app-shell {
  display: grid;
  grid-template-rows: --grid-row-base();
  grid-template-columns: --grid(1200px, 12);

  grid-template-columns:
    [full-start] minmax(2rem, 1fr)
    [center-start] repeat(
      12,
      [gutter-start] var(--gutter-columns) var(--gutter-columns) [gutter-end
        content-start] clamp(1rem, round(5.5vw, 2rem), 6rem) [content-end]
    )
    [gutter-start] var(--gutter-columns) var(--gutter-columns)
    [center-end gutter-end] minmax(2rem, 1fr)
    [full-end];

  min-height: 100dvh;
  background: var(--site-background);
  view-transition-name: attr(id type(<custom-ident>), none);
  background-image: paint(grid);
  contain: layout style;
  /* background-image: paint(bytemare); */
}

.jump-link {
  color: hotpink;
  text-decoration: underline;
  text-underline-offset: calc(0.5em - 4px);
  text-decoration-color: aqua;
}

site-hero {
  color: var(--colour-light-1);
  display: grid;
  grid-column: full;
  grid-template-columns: subgrid;
  padding-block-start: calc(var(--padding) * 5);
  padding-block-end: calc(var(--padding) * 3);
  view-transition-name: attr(id type(<custom-ident>), none);
  position: relative;

  p {
    text-wrap: balance;
    color: rgba(0, 0, 0, 0.75);
    font-size: var(--font-scaled-lg);
    font-weight: 400;
    margin-block-end: 1rem;
    line-height: 3.2lh;
    padding-block-start: calc(2rem - 1cap);
  }

  .hero-content {
    background-color: --transparent(var(--light-100), 0.5);
    grid-column: center-start / -10;
    padding: 3rem 3rem 4rem 3rem;
  }

  .heading {
    color: var(--dark-400);
    font-size: var(--font-scaled-xxl);
    inset: auto auto auto -3px;
    line-height: calc(1lh + 1cap);
    margin-block-end: round(calc(1lh / 2), 1rem);
    padding-top: calc(4rem - 1cap);
    position: relative;
    view-transition-name: attr(id type(<custom-ident>), none);
    background-color: var(--light-400);
  }

  .subheading {
    view-transition-name: attr(id type(<custom-ident>), none);
    display: inline-block;
    color: var(--dark-300);
    padding-block-start: calc(2rem - 1cap);
  }
}
